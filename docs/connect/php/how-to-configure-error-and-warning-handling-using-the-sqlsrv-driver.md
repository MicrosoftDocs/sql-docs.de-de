---
title: Konfigurieren der Behandlung von Fehlern und Warnungen unter Verwendung des SQLSRV-Treibers
description: In diesem Thema wird beschrieben, wie Sie den SQLSRV-Treiber konfigurieren, um Fehler und Warnungen bei der Verwendung des Microsoft SQLSRV-Treibers für PHP für SQL Server zu behandeln.
ms.custom: ''
ms.date: 08/10/2020
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- errors and warnings
ms.assetid: 257c6f53-9137-4619-a613-eee33d2077e8
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: aa96471a6702836b48e95e65fdb40bde30ecd14f
ms.sourcegitcommit: 917df4ffd22e4a229af7dc481dcce3ebba0aa4d7
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/10/2021
ms.locfileid: "100042450"
---
# <a name="how-to-configure-error-and-warning-handling-using-the-sqlsrv-driver"></a>Vorgehensweise: Konfigurieren der Behandlung von Fehlern und Warnungen unter Verwendung des SQLSRV-Treibers
[!INCLUDE[Driver_PHP_Download](../../includes/driver_php_download.md)]

Dieses Thema beschreibt, wie der SQLSRV-Treiber zur Behandlung von Fehlern und Warnungen konfiguriert wird.  
  
Standardmäßig werden im SQLSRV-Treiber Warnungen als Fehler behandelt. Ein Aufruf einer **sqlsrv**-Funktion, die einen Fehler oder eine Warnung generiert, gibt **FALSE** zurück. Verwenden Sie die Funktion [sqlsrv_configure](../../connect/php/sqlsrv-configure.md), um dieses Verhalten zu deaktivieren. Wenn die folgende Codezeile am Anfang eines Skripts enthalten ist, gibt eine **sqlsrv**-Funktion, die nur Warnungen (keine Fehler) generiert, nicht **FALSE** zurück:  
  
`sqlsrv_configure("WarningsReturnAsErrors", 0);`  
  
Die folgende Codezeile setzt das Standardverhalten zurück (Warnungen werden als Fehler behandelt):  
  
`sqlsrv_configure("WarningsReturnAsErrors", 1);`  
  
> [!NOTE]  
> Warnungen, die den SQLSTATE-Werten 01000, 01001, 01003 und 01S02 entsprechen, werden nie als Fehler behandelt. Eine **sqlsrv** -Funktion, die nur Warnungen generiert, die einem dieser Zustände entsprechen, gibt unabhängig von der Konfiguration nicht **false** zurück.  
  
Der Wert für **WarningsReturnAsErrors** kann auch in der Datei php.ini festgelegt werden. Zum Beispiel deaktiviert dieser Eintrag im Abschnitt `[sqlsrv]` der Datei „php.ini“ das Standardverhalten.  
  
`sqlsrv.WarningsReturnAsErrors = 0`  
  
Informationen zum Abrufen von Fehler- und Warnungsinformationen finden Sie unter [sqlsrv_errors](../../connect/php/sqlsrv-errors.md) und unter [Vorgehensweise: Behandeln von Fehlern und Warnungen](../../connect/php/how-to-handle-errors-and-warnings-using-the-sqlsrv-driver.md).  
  
## <a name="example"></a>Beispiel  
Das folgende Codebeispiel veranschaulicht, wie das Standardverhalten der Fehlerbehandlung deaktiviert wird.  Das Beispiel verwendet den Befehl PRINT von Transact-SQL, um eine Warnung zu generieren. Weitere Informationen zum Befehl PRINT finden Sie unter [PRINT (Transact-SQL)](../../t-sql/language-elements/print-transact-sql.md).  
  
Das Beispiel veranschaulicht durch das Ausführen einer Abfrage, die eine Warnung generiert, zunächst das Standardverhalten der Fehlerbehandlung. Diese Warnung wird als Fehler behandelt. Nach Ändern der Konfiguration für die Fehlerbehandlung wird die gleiche Abfrage ausgeführt. Die Warnung wird nicht als Fehler behandelt.  
  
Das Beispiel setzt voraus, dass SQL Server auf dem lokalen Computer installiert ist. Wenn das Beispiel über die Befehlszeile ausgeführt wird, werden alle Ausgaben in die Konsole geschrieben.  
  
```  
<?php  
/* Connect to the local server using Windows Authentication. */  
$serverName = "(local)";  
$conn = sqlsrv_connect( $serverName );  
if( $conn === false )  
{  
     echo "Could not connect.\n";  
     die( print_r( sqlsrv_errors(), true));  
}  
  
/* The Transact-SQL PRINT statement can be used to return   
informational or warning messages*/  
$tsql = "PRINT 'The PRINT statement can be used ";  
$tsql .= "to return user-defined warnings.'";  
  
/* Execute the query and print any errors. */  
$stmt1 = sqlsrv_query( $conn, $tsql);  
if($stmt1 === false)  
{  
     echo "By default, warnings are treated as errors:\n";  
     /* Dump errors in the error collection. */  
     print_r(sqlsrv_errors(SQLSRV_ERR_ERRORS));  
}  
  
/* Disable warnings as errors behavior. */  
sqlsrv_configure("WarningsReturnAsErrors", 0);  
  
/* Execute the same query and print any errors. */  
$stmt2 = sqlsrv_query( $conn, $tsql);  
if($stmt2 === false)  
{  
     /* Dump errors in the error collection. */  
     /* Since the warning generated by the query is be treated as   
        an error, this block of code will not be executed. */  
     print_r(sqlsrv_errors(SQLSRV_ERR_ERRORS));  
}  
else  
{  
     echo "After calling ";  
     echo "sqlsrv_configure('WarningsReturnAsErrors', 0), ";  
     echo "warnings are not treated as errors.";  
}  
  
/*Close the connection. */  
sqlsrv_close($conn);  
?>  
```  
  
## <a name="see-also"></a>Weitere Informationen  
[Protokollieren von Aktivitäten](../../connect/php/logging-activity.md)

[Programmierhandbuch für die Microsoft-Treiber für PHP für SQL Server](../../connect/php/programming-guide-for-php-sql-driver.md)

[API-Referenz für den SQLSRV-Treiber](../../connect/php/sqlsrv-driver-api-reference.md)  
  
